@model HomeViewModel

@{
    ViewData["Title"] = "Inicio - Investigación Científica";
}

<div class="py-12 bg-gradient-to-br from-gray-100 to-gray-200 dark:bg-gradient-to-br dark:from-gray-900 dark:to-gray-800 min-h-screen gradient-bg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Hero Section -->
        <div class="text-center mb-16">
            <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400 sm:text-6xl animate-float">
                Investigación Científica
            </h1>
            <p class="mt-4 text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
                Plataforma integral para la gestión y visualización de proyectos de investigación
            </p>
        </div>

        <!-- Bento Grid Stats -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            <!-- Instituciones -->
            <div class="glass overflow-hidden shadow-xl rounded-3xl p-6 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 animate-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">Instituciones</p>
                        <p class="text-3xl font-bold text-indigo-600 dark:text-indigo-400 mt-2">@Model.TotalInstituciones</p>
                    </div>
                    <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center animate-float">
                        <i class="fas fa-university text-indigo-600 dark:text-indigo-400 text-xl" data-bs-toggle="tooltip" data-bs-placement="top" title="Total de instituciones registradas"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="bg-indigo-600 dark:bg-indigo-400 h-2 rounded-full animate-pulse" style="width: 75%"></div>
                    </div>
                </div>
            </div>

            <!-- Investigadores -->
            <div class="glass overflow-hidden shadow-xl rounded-3xl p-6 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 animate-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">Investigadores</p>
                        <p class="text-3xl font-bold text-green-600 dark:text-green-400 mt-2">@Model.TotalInvestigadores</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center animate-float">
                        <i class="fas fa-users text-green-600 dark:text-green-400 text-xl" data-bs-toggle="tooltip" data-bs-placement="top" title="Total de investigadores activos"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="bg-green-600 dark:bg-green-400 h-2 rounded-full animate-pulse" style="width: 85%"></div>
                    </div>
                </div>
            </div>

            <!-- Proyectos -->
            <div class="glass overflow-hidden shadow-xl rounded-3xl p-6 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 animate-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">Proyectos</p>
                        <p class="text-3xl font-bold text-yellow-600 dark:text-yellow-400 mt-2">@Model.TotalProyectos</p>
                    </div>
                    <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center animate-float">
                        <i class="fas fa-project-diagram text-yellow-600 dark:text-yellow-400 text-xl" data-bs-toggle="tooltip" data-bs-placement="top" title="Total de proyectos en desarrollo"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="bg-yellow-600 dark:bg-yellow-400 h-2 rounded-full animate-pulse" style="width: 60%"></div>
                    </div>
                </div>
            </div>

            <!-- Publicaciones -->
            <div class="glass overflow-hidden shadow-xl rounded-3xl p-6 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 animate-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">Publicaciones</p>
                        <p class="text-3xl font-bold text-red-600 dark:text-red-400 mt-2">@Model.TotalPublicaciones</p>
                    </div>
                    <div class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center animate-float">
                        <i class="fas fa-book text-red-600 dark:text-red-400 text-xl" data-bs-toggle="tooltip" data-bs-placement="top" title="Total de publicaciones científicas"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="bg-red-600 dark:bg-red-400 h-2 rounded-full animate-pulse" style="width: 90%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bento Grid Charts and Info -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <!-- Large Chart -->
            <div class="lg:col-span-2 glass p-6 rounded-3xl shadow-xl">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center">
                    <i class="fas fa-chart-line mr-3 text-indigo-600 dark:text-indigo-400"></i>
                    Distribución de Presupuestos
                </h3>
                <div class="h-80">
                    <canvas id="presupuestoChart" class="w-full h-full"></canvas>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="space-y-6">
                <!-- Activity Chart -->
                <div class="glass p-6 rounded-3xl shadow-xl">
                    <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center">
                        <i class="fas fa-chart-bar mr-2 text-green-600 dark:text-green-400"></i>
                        Actividad
                    </h4>
                    <div class="h-48">
                        <canvas id="actividadChart" class="w-full h-full"></canvas>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 dark:from-purple-600 dark:to-pink-600 rounded-3xl p-6 text-white shadow-xl glass">
                    <h4 class="text-lg font-semibold mb-4">Resumen Financiero</h4>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span>Total Presupuesto:</span>
                            <span class="font-bold">@Model.PresupuestoTotal.ToString("C")</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Promedio por Proyecto:</span>
                            <span class="font-bold">@Model.PromedioPresupuesto.ToString("C")</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Proyectos Activos:</span>
                            <span class="font-bold">@Model.ProyectosActivos</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Publicaciones @DateTime.Now.Year:</span>
                            <span class="font-bold">@Model.PublicacionesUltimoAño</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="text-center">
            <div class="glass rounded-3xl shadow-xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">Explora Nuestros Datos</h2>
                <p class="text-gray-600 dark:text-gray-300 mb-6">Navega por instituciones, investigadores, proyectos y publicaciones</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="@Url.Action("Index", "Instituciones")" class="bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center font-medium ripple">
                        <i class="fas fa-university mr-2"></i> Instituciones
                    </a>
                    <a href="@Url.Action("Index", "Investigadores")" class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center font-medium ripple">
                        <i class="fas fa-users mr-2"></i> Investigadores
                    </a>
                    <a href="@Url.Action("Index", "Proyectos")" class="bg-yellow-600 hover:bg-yellow-700 dark:bg-yellow-500 dark:hover:bg-yellow-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center font-medium ripple">
                        <i class="fas fa-project-diagram mr-2"></i> Proyectos
                    </a>
                    <a href="@Url.Action("Index", "Publicaciones")" class="bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 flex items-center font-medium ripple">
                        <i class="fas fa-book mr-2"></i> Publicaciones
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Gráfico de Presupuestos
        const ctx1 = document.getElementById('presupuestoChart').getContext('2d');
        const presupuestoChart = new Chart(ctx1, {
            type: 'doughnut',
            data: {
                labels: ['Presupuesto Total', 'Promedio por Proyecto'],
                datasets: [{
                    data: [@Model.PresupuestoTotal, @Model.PromedioPresupuesto],
                    backgroundColor: ['rgba(99, 102, 241, 0.8)', 'rgba(34, 197, 94, 0.8)'],
                    borderColor: ['rgba(99, 102, 241, 1)', 'rgba(34, 197, 94, 1)'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            usePointStyle: true
                        }
                    }
                }
            }
        });

        // Gráfico de Actividad
        const ctx2 = document.getElementById('actividadChart').getContext('2d');
        const actividadChart = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: ['Proyectos Activos', 'Publicaciones ' + new Date().getFullYear()],
                datasets: [{
                    label: 'Cantidad',
                    data: [@Model.ProyectosActivos, @Model.PublicacionesUltimoAño],
                    backgroundColor: ['rgba(245, 158, 11, 0.8)', 'rgba(239, 68, 68, 0.8)'],
                    borderColor: ['rgba(245, 158, 11, 1)', 'rgba(239, 68, 68, 1)'],
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    </script>
}
